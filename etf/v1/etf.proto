syntax = "proto3";

package api.etf.v1;

import "google/api/annotations.proto";

option go_package = "github.com/wegge0857/PolyrepoGoMicros-ApiLink/etf/v1;etf";
option java_multiple_files = true;
option java_package = "api.etf.v1";
option java_outer_classname = "EtfProto";

service Etf {
	rpc CreateEtf (CreateEtfRequest) returns (CreateEtfReply);
	rpc UpdateEtf (UpdateEtfRequest) returns (UpdateEtfReply);
	rpc DeleteEtf (DeleteEtfRequest) returns (DeleteEtfReply);

	rpc ListEtf (ListEtfRequest) returns (ListEtfReply);

	rpc GetEtf (GetEtfRequest) returns (GetEtfReply){
		option (google.api.http) = {
			get: "/etf/{id}"
		};
	};
	// 更新收藏数量
	rpc UpdateStar (UpdateStarRequest) returns (UpdateStarReply) {
		option (google.api.http) = {
			post: "/etf/star",
			body: "*"
		};
	}

}

message GetEtfRequest {
    int64 id = 1;
}

message GetEtfReply {
    int64 id = 1;
    string name = 2;
    double ten_y_cagr = 3; //近十年年化收益率 double精度达15位，float精度只有7位
}

message UpdateStarRequest {
  // ETF 的唯一 ID
  int64 id = 1;
  // 操作类型：例如 "+" 代表加，"-" 代表减
  string kind = 2;
}

message UpdateStarReply {
  // 可以返回更新后的最新数值，或者只返回成功状态
  int64 current_star = 1;
}

message CreateEtfRequest {}
message CreateEtfReply {}

message UpdateEtfRequest {}
message UpdateEtfReply {}

message DeleteEtfRequest {}
message DeleteEtfReply {}



message ListEtfRequest {}
message ListEtfReply {}